<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ¯ ì¤„ì„ë§ í…ŒìŠ¤íŠ¸</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
* { box-sizing: border-box; margin:0; padding:0; }
body {
    font-family:'Segoe UI', Arial, sans-serif;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    min-height:100vh;
    background:linear-gradient(135deg,#e0eafc,#cfdef3);
    padding:20px;
}
.container {
    background:#fff;
    padding:20px;
    border-radius:12px;
    box-shadow:0 6px 20px rgba(0,0,0,0.15);
    text-align:center;
    width:100%;
    max-width:420px;
}
h2,h3 { color:#333; margin-bottom:12px; font-weight:600; }
input, button { font-size:14px; }
input {
    width:100%;
    padding:8px;
    margin:6px 0;
    border:1px solid #ddd;
    border-radius:6px;
}
button {
    padding:8px 16px;
    margin:6px 3px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    background:linear-gradient(45deg,#4CAF50,#66BB6A);
    color:#fff;
    min-width:90px;
}
button:hover { background:linear-gradient(45deg,#45a049,#5cb85c); }
.radio-group { display:flex; flex-wrap:wrap; justify-content:center; gap:12px; margin:12px 0; }
.radio-group label { font-size:13px; color:#555; }
#loginSection,#testSection,#resultSection,#addQuestionSection,#graphSection { display:none; }
#question { margin:12px 0; font-weight:500; color:#333; word-break:break-word; }
canvas { max-width:100%; height:200px; margin-top:12px; border-radius:6px; background:#fff; padding:6px; }
.table-container { max-width:100%; overflow-x:auto; margin-top:12px; }
table { width:100%; border-collapse:collapse; font-size:13px; text-align:center; }
th,td { border:1px solid #ddd; padding:6px; }
th { background:#f5f5f5; }
.no-data { margin-top:12px; color:#555; }
</style>
</head>
<body>
<div class="container">
<h2>ğŸ¯ ì¤„ì„ë§ í…ŒìŠ¤íŠ¸</h2>

<div id="loginSection">
<h3>ğŸ‘¤ ê´€ë¦¬ì ë¡œê·¸ì¸</h3>
<input type="text" id="adminId" placeholder="ì•„ì´ë”” ì…ë ¥">
<input type="password" id="adminPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
<button onclick="adminLogin()">ğŸ”‘ ë¡œê·¸ì¸</button>
</div>

<form id="infoForm" onsubmit="startTest(event)">
<h3>ğŸ“ í•™ìƒ ì •ë³´ ì…ë ¥</h3>
<input type="text" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required>
<button type="submit">â–¶ í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
<button type="button" onclick="showAdminLogin()">ğŸ‘¤ ê´€ë¦¬ì ë¡œê·¸ì¸</button>
</form>

<div id="testSection">
<h3>ğŸ“š ì¤„ì„ë§ í…ŒìŠ¤íŠ¸</h3>
<p id="question"></p>
<div class="radio-group">
<label>âœ… <input type="radio" name="answer" value="yes"> ì”ë‹ˆë‹¤</label>
<label>âŒ <input type="radio" name="answer" value="no"> ì•ˆì”ë‹ˆë‹¤</label>
</div>
<button onclick="nextQuestion()">â¡ ë‹¤ìŒ</button>
<button onclick="goBack('testSection')">ğŸ”™ ë’¤ë¡œ ê°€ê¸°</button>
</div>

<div id="resultSection">
<h3>ğŸ† í…ŒìŠ¤íŠ¸ ê²°ê³¼</h3>
<p id="result"></p>
<canvas id="personalScoreChart"></canvas>
<button onclick="goBack('resultSection')">ğŸ”™ ë’¤ë¡œ ê°€ê¸°</button>
</div>

<div id="addQuestionSection">
<h3>â• ì§ˆë¬¸ ì¶”ê°€</h3>
<input type="text" id="newQuestion" placeholder="ì¤„ì„ë§ ì…ë ¥">
<button onclick="addQuestion()">âœ… ì§ˆë¬¸ ì¶”ê°€</button>
<button onclick="showGraph()">ğŸ“Š ê·¸ë˜í”„ ë³´ê¸°</button>
<button onclick="showTable()">ğŸ—‚ í•™ìƒ ì‘ë‹µ ë³´ê¸°</button>
<button onclick="resetStudentData()">ğŸ§¹ í•™ìƒ ë°ì´í„° ì´ˆê¸°í™”</button>
<div id="responseTable" class="table-container"></div>
</div>

<div id="graphSection">
<h3>ğŸ“ˆ ì „ì²´ í•™ìƒ ì ìˆ˜</h3>
<div id="noDataMessage" class="no-data">í•™ìƒ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
<canvas id="scoreChart"></canvas>
<button onclick="goBack('graphSection')">ğŸ”™ ë’¤ë¡œ ê°€ê¸°</button>
</div>
</div>

<script>
let questions = JSON.parse(localStorage.getItem('questions')) || [
{ text:"ìƒíŒŒ", correct:"no"},{ text:"ìƒì„ ", correct:"no"},
{ text:"ì˜í†µ", correct:"no"},{ text:"ì¹´í†¡", correct:"no"},
{ text:"ã…‡ã…‡", correct:"no"},{ text:"ã…‡ã…ˆ", correct:"no"},{ text:"ã…‡ã…‹", correct:"no"}];
let currentQuestion=0,score=0,studentData=JSON.parse(localStorage.getItem('studentData'))||[],currentStudent={},currentResponses=[],chartInstance=null,personalChartInstance=null;

window.onload=()=>{document.getElementById('infoForm').style.display='block';};
function showAdminLogin(){document.getElementById('infoForm').style.display='none';document.getElementById('loginSection').style.display='block';}
function adminLogin(){const id=document.getElementById('adminId').value,password=document.getElementById('adminPassword').value;if(id==="2541"&&password==="2541"){document.getElementById('loginSection').style.display='none';document.getElementById('addQuestionSection').style.display='block';showTable();}else alert('ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤.');}
function goBack(section){document.getElementById(section).style.display='none';if(section==='testSection'||section==='resultSection'){document.getElementById('infoForm').style.display='block';}else if(section==='graphSection'){document.getElementById('addQuestionSection').style.display='block';showTable();}}
function startTest(e){e.preventDefault();const name=document.getElementById('name').value.trim();if(!name){alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');return;}currentStudent={name};currentResponses=[];score=0;currentQuestion=0;document.getElementById('infoForm').style.display='none';document.getElementById('testSection').style.display='block';loadQuestion();}
function loadQuestion(){if(currentQuestion<questions.length){document.getElementById('question').textContent=`ë¬¸ì œ ${currentQuestion+1}: "${questions[currentQuestion].text}"ì„(ë¥¼) ì‚¬ìš©í•©ë‹ˆê¹Œ?`;document.querySelectorAll('input[name="answer"]').forEach(r=>r.checked=false);}else showResult();}
function nextQuestion(){const selected=document.querySelector('input[name="answer"]:checked');if(!selected){alert('ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!');return;}currentResponses.push(selected.value);if(selected.value===questions[currentQuestion].correct)score++;currentQuestion++;loadQuestion();}
function showResult(){document.getElementById('testSection').style.display='none';document.getElementById('resultSection').style.display='block';const percentage=Math.round(score/questions.length*100);document.getElementById('result').textContent=`ğŸ‰ ${currentStudent.name}ë‹˜ì˜ ì ìˆ˜: ${score}/${questions.length} (${percentage}ì )`;studentData.push({label:currentStudent.name,score:percentage,responses:currentResponses});localStorage.setItem('studentData',JSON.stringify(studentData));if(personalChartInstance)personalChartInstance.destroy();const ctx=document.getElementById('personalScoreChart').getContext('2d');personalChartInstance=new Chart(ctx,{type:'bar',data:{labels:[currentStudent.name],datasets:[{label:'ë‚´ ì ìˆ˜ (1-100)',data:[percentage],backgroundColor:'rgba(75,192,192,0.7)',borderColor:'rgba(75,192,192,1)',borderWidth:2,borderRadius:6}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{beginAtZero:true,max:100}}}});}
function addQuestion(){const q=document.getElementById('newQuestion').value.trim();if(!q){alert('ì¤„ì„ë§ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');return;}questions.push({text:q,correct:'no'});localStorage.setItem('questions',JSON.stringify(questions));document.getElementById('newQuestion').value='';alert('âœ… ì§ˆë¬¸ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');}
function resetStudentData(){if(!confirm('ëª¨ë“  í•™ìƒ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?'))return;studentData=[];localStorage.removeItem('studentData');if(chartInstance){chartInstance.destroy();chartInstance=null;}document.getElementById('responseTable').innerHTML='';alert('ğŸ§¹ í•™ìƒ ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');document.getElementById('addQuestionSection').style.display='block';document.getElementById('graphSection').style.display='none';}
function showTable(){const container=document.getElementById('responseTable');if(studentData.length===0){container.innerHTML='<p class="no-data">í•™ìƒ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';return;}let table='<table><thead><tr><th>í•™ìƒ</th>';questions.forEach((q,i)=>table+=`<th>ë¬¸ì œ ${i+1}</th>`);table+='</tr></thead><tbody>';studentData.forEach(s=>{table+=`<tr><td>${s.label}</td>`;s.responses.forEach(r=>table+=`<td>${r==='yes'?'âœ… ì”ë‹ˆë‹¤':'âŒ ì•ˆì”ë‹ˆë‹¤'}</td>`);table+='</tr>';});table+='</tbody></table>';container.innerHTML=table;}
function showGraph(){document.getElementById('resultSection').style.display='none';document.getElementById('infoForm').style.display='none';document.getElementById('testSection').style.display='none';document.getElementById('addQuestionSection').style.display='none';document.getElementById('graphSection').style.display='block';const noData=document.getElementById('noDataMessage'),scoreChart=document.getElementById('scoreChart');if(studentData.length===0){noData.style.display='block';scoreChart.style.display='none';return;}noData.style.display='none';scoreChart.style.display='block';if(chartInstance)chartInstance.destroy();const ctx=scoreChart.getContext('2d');chartInstance=new Chart(ctx,{type:'bar',data:{labels:studentData.map(d=>d.label),datasets:[{label:'ì ìˆ˜ (1-100)',data:studentData.map(d=>d.score),backgroundColor:'rgba(75,192,192,0.7)',borderColor:'rgba(75,192,192,1)',borderWidth:2,borderRadius:6}]},options:{responsive:true,maintainAspectRatio:false,scales:{y:{beginAtZero:true,max:100}}}});}
</script>
</body>
</html>
